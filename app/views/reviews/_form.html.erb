<% if logged_in? %>
  <%= render 'shared/errors', obj: @review%>
  <div class="rating-form-body well">
    <%= form_with(model:[@resturant,@review],class: "shadow p-3 mb-5 bg-white rounded") do |f| %>
      <div class="rating-form form-group">
        <%= f.hidden_field :rating, class: "rating", in: 1..5 %>
          <% (1..5).each do |value| %>
            <span class="bi bi-star" data-value="<%= value %>"></span>
          <% end %>
      </div>

      <div class = "form-group">
        <%= f.label :comment %><br>
        <%= f.text_area :comment, class: "form-control" %>
      </div>

      <div class="form-group row mb-3">
          <%= f.label :review_images %>
          <%= f.file_field :review_images , multiple: true %>
      </div> 
      
      <div class="d-flex justify-content-center">
          <%= f.submit class: "btn btn-outline-success btn-lg"%>  
        </div>
    <% end %>
  </div>
  <% else %>
    <h5 class="alert alert-info">Login to add Reviews or Restaurant images</h5>
    <%= link_to 'Login', login_path, class: "btn btn-primary" %>
<% end %>


<script src="https://code.jquery.com/jquery-3.6.4.min.js" integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8=" crossorigin="anonymous"></script>


<script> 
  $('.rating-form span').click(function(){
    var value = $(this).attr("data-value");
    $(".rating").val(value);
    $(this).siblings("span").removeClass("bi-star-fill").addClass("bi-star");
    $(this).removeClass("bi-star").addClass("bi-star-fill");
    $(this).prevAll("span").removeClass("bi-star").addClass("bi-star-fill");
  });
</script>