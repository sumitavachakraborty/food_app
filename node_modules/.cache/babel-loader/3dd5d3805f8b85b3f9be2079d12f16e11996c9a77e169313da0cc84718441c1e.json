{"ast":null,"code":"// //adding cart items\n// var cart = {};\n// let restid = 0;\n// $(\".submit-order\").click(function () {\n//   $(\"#submit-cart\").removeAttr(\"style\");\n//   var orderItem = $(this).closest(\".order-item\");\n//   var quantity = orderItem.find(\".order-quantity\").val();\n//   var id = orderItem.find(\".submit-order\").val();\n//   var price = orderItem.find(\".card-text\").text();\n//   var name = orderItem.find(\".foodname\").text();\n//   var resturantid = orderItem.find(\".restid\").text();\n//   restid = resturantid;\n//   var item = {\n//     q: quantity,\n//     p: price,\n//     n: name,\n//   };\n//   cart[id] = item;\n//   updateCart();\n// });\n\n// function updateCart() {\n//   localStorage.setItem(\"cart\", JSON.stringify(cart));\n//   $(\"#cart-items\").empty();\n//   var totalQuantity = 0;\n//   var totalPrice = 0;\n\n//   Object.keys(cart).forEach((item) => {\n//     var itemPrice = cart[item].q * cart[item].p;\n//     totalQuantity += cart[item].q;\n//     totalPrice += itemPrice;\n\n//     var cartItemHtml =\n//       '<div class=\"cart-item\">' +\n//       '<li class=\"list-group-item\">Food Name: <strong>' +\n//       cart[item].n +\n//       \"</strong></li>\" +\n//       '<li class=\"list-group-item\">Quantity: ' +\n//       cart[item].q +\n//       \"</li>\" +\n//       '<li class=\"list-group-item\"> <strong> Price: Rs.' +\n//       itemPrice +\n//       \"</strong></li>\" +\n//       \"</div>\";\n\n//     $(\"#cart-items\").append(cartItemHtml);\n//   });\n\n//   $(\"#total-quantity\").text(totalQuantity);\n//   $(\"#total-price\").text(\"Rs\" + totalPrice.toFixed(2));\n// }\n\n// $(\"#checkout\").click(function () {\n//   localStorage.removeItem(\"cart\");\n\n//   $.ajax({\n//     url: \"/resturants/\" + restid + \"/orders\",\n//     method: \"POST\",\n//     data: {\n//       cart_items: cart,\n//       authenticity_token: $('meta[name=\"csrf-token\"]').attr(\"content\"),\n//     },\n//     success: function (response) {\n//       alert(\"Added to cart successfully!\");\n//     },\n//     error: function (xhr, status, error) {\n//       alert(\"Error placing the order. Please try again.\");\n//     },\n//   });\n// });\n\n// Resturant-specific cart items\nvar carts = {};\nvar restid = 0;\n\n// Load cart items and cart item count from local storage when the page loads\n$(document).ready(function () {\n  if (localStorage.getItem(\"carts\")) {\n    carts = JSON.parse(localStorage.getItem(\"carts\"));\n    restid = getRestIdFromUrl(); // Update the restid based on the current URL\n    updateCartItemCount(); // Update the cart item count in the cart button\n  }\n});\n\n// Get the resturant ID from the URL\nfunction getRestIdFromUrl() {\n  var urlParts = window.location.pathname.split(\"/\");\n  var restIdIndex = urlParts.indexOf(\"resturants\") + 1;\n  return urlParts[restIdIndex];\n}\n\n// Cart button click event\n$(\"#cart-btn\").click(function () {\n  updateCart();\n});\n\n// Load cart item count from local storage and update the cart button\nfunction updateCartItemCount() {\n  var cartItemCount = 0;\n  if (carts[restid]) {\n    cartItemCount = Object.keys(carts[restid]).length;\n  }\n  $(\"#cart-item-count\").text(cartItemCount);\n}\n\n// Cart item click event\n$(\".submit-order\").click(function () {\n  $(\"#submit-cart\").removeAttr(\"style\");\n  var orderItem = $(this).closest(\".order-item\");\n  var quantity = orderItem.find(\".order-quantity\").val();\n  var id = orderItem.find(\".submit-order\").val();\n  var price = orderItem.find(\".card-text\").text();\n  var name = orderItem.find(\".foodname\").text();\n  restid = orderItem.find(\".restid\").text();\n  if (!carts[restid]) {\n    carts[restid] = {};\n  }\n  var item = {\n    q: quantity,\n    p: price,\n    n: name\n  };\n  carts[restid][id] = item;\n  updateCart();\n  increaseCartItemCount();\n});\nfunction updateCart() {\n  localStorage.setItem(\"carts\", JSON.stringify(carts));\n  $(\"#cart-items\").empty();\n  var totalQuantity = 0;\n  var totalPrice = 0;\n  if (carts[restid]) {\n    Object.keys(carts[restid]).forEach(item => {\n      var itemPrice = carts[restid][item].q * carts[restid][item].p;\n      totalQuantity += carts[restid][item].q;\n      totalPrice += itemPrice;\n      var cartItemHtml = '<div class=\"cart-item\">' + '<li class=\"list-group-item\">Food Name: <strong>' + carts[restid][item].n + \"</strong></li>\" + '<li class=\"list-group-item\">Quantity: ' + carts[restid][item].q + \"</li>\" + '<li class=\"list-group-item\"> <strong> Price: Rs.' + itemPrice + \"</strong></li>\" + \"</div>\";\n      $(\"#cart-items\").append(cartItemHtml);\n    });\n  }\n  $(\"#total-quantity\").text(totalQuantity);\n  $(\"#total-price\").text(\"Rs\" + totalPrice.toFixed(2));\n  updateCartItemCount();\n}\n$(\"#checkout\").click(function () {\n  localStorage.setItem(\"carts\", JSON.stringify(carts));\n  sessionStorage.removeItem(\"cart\");\n  $.ajax({\n    url: \"/resturants/\" + restid + \"/orders\",\n    method: \"POST\",\n    data: {\n      cart_items: carts[restid],\n      authenticity_token: $('meta[name=\"csrf-token\"]').attr(\"content\")\n    },\n    success: function (response) {\n      alert(\"Added to cart successfully!\");\n      updateCartItemCount();\n    },\n    error: function (xhr, status, error) {\n      alert(\"Error placing the order. Please try again.\");\n    }\n  });\n  delete carts[restid];\n});","map":{"version":3,"names":["carts","restid","$","document","ready","localStorage","getItem","JSON","parse","getRestIdFromUrl","updateCartItemCount","urlParts","window","location","pathname","split","restIdIndex","indexOf","click","updateCart","cartItemCount","Object","keys","length","text","removeAttr","orderItem","closest","quantity","find","val","id","price","name","item","q","p","n","increaseCartItemCount","setItem","stringify","empty","totalQuantity","totalPrice","forEach","itemPrice","cartItemHtml","append","toFixed","sessionStorage","removeItem","ajax","url","method","data","cart_items","authenticity_token","attr","success","response","alert","error","xhr","status"],"sources":["/home/sumitava/rails_practise/zom/zoma/app/javascript/packs/add_to_cart.js"],"sourcesContent":["// //adding cart items\n// var cart = {};\n// let restid = 0;\n// $(\".submit-order\").click(function () {\n//   $(\"#submit-cart\").removeAttr(\"style\");\n//   var orderItem = $(this).closest(\".order-item\");\n//   var quantity = orderItem.find(\".order-quantity\").val();\n//   var id = orderItem.find(\".submit-order\").val();\n//   var price = orderItem.find(\".card-text\").text();\n//   var name = orderItem.find(\".foodname\").text();\n//   var resturantid = orderItem.find(\".restid\").text();\n//   restid = resturantid;\n//   var item = {\n//     q: quantity,\n//     p: price,\n//     n: name,\n//   };\n//   cart[id] = item;\n//   updateCart();\n// });\n\n// function updateCart() {\n//   localStorage.setItem(\"cart\", JSON.stringify(cart));\n//   $(\"#cart-items\").empty();\n//   var totalQuantity = 0;\n//   var totalPrice = 0;\n\n//   Object.keys(cart).forEach((item) => {\n//     var itemPrice = cart[item].q * cart[item].p;\n//     totalQuantity += cart[item].q;\n//     totalPrice += itemPrice;\n\n//     var cartItemHtml =\n//       '<div class=\"cart-item\">' +\n//       '<li class=\"list-group-item\">Food Name: <strong>' +\n//       cart[item].n +\n//       \"</strong></li>\" +\n//       '<li class=\"list-group-item\">Quantity: ' +\n//       cart[item].q +\n//       \"</li>\" +\n//       '<li class=\"list-group-item\"> <strong> Price: Rs.' +\n//       itemPrice +\n//       \"</strong></li>\" +\n//       \"</div>\";\n\n//     $(\"#cart-items\").append(cartItemHtml);\n//   });\n\n//   $(\"#total-quantity\").text(totalQuantity);\n//   $(\"#total-price\").text(\"Rs\" + totalPrice.toFixed(2));\n// }\n\n// $(\"#checkout\").click(function () {\n//   localStorage.removeItem(\"cart\");\n  \n//   $.ajax({\n//     url: \"/resturants/\" + restid + \"/orders\",\n//     method: \"POST\",\n//     data: {\n//       cart_items: cart,\n//       authenticity_token: $('meta[name=\"csrf-token\"]').attr(\"content\"),\n//     },\n//     success: function (response) {\n//       alert(\"Added to cart successfully!\");\n//     },\n//     error: function (xhr, status, error) {\n//       alert(\"Error placing the order. Please try again.\");\n//     },\n//   });\n// });\n\n  // Resturant-specific cart items\n  var carts = {};\n  var restid = 0;\n\n  // Load cart items and cart item count from local storage when the page loads\n  $(document).ready(function () {\n    if (localStorage.getItem(\"carts\")) {\n      carts = JSON.parse(localStorage.getItem(\"carts\"));\n      restid = getRestIdFromUrl(); // Update the restid based on the current URL\n      updateCartItemCount(); // Update the cart item count in the cart button\n    }\n  });\n\n  // Get the resturant ID from the URL\n  function getRestIdFromUrl() {\n    var urlParts = window.location.pathname.split(\"/\");\n    var restIdIndex = urlParts.indexOf(\"resturants\") + 1;\n    return urlParts[restIdIndex];\n  }\n\n  // Cart button click event\n  $(\"#cart-btn\").click(function () {\n    updateCart();\n  });\n\n  // Load cart item count from local storage and update the cart button\n  function updateCartItemCount() {\n    var cartItemCount = 0;\n    if (carts[restid]) {\n      cartItemCount = Object.keys(carts[restid]).length;\n    }\n    $(\"#cart-item-count\").text(cartItemCount);\n  }\n\n  // Cart item click event\n  $(\".submit-order\").click(function () {\n    $(\"#submit-cart\").removeAttr(\"style\");\n    var orderItem = $(this).closest(\".order-item\");\n    var quantity = orderItem.find(\".order-quantity\").val();\n    var id = orderItem.find(\".submit-order\").val();\n    var price = orderItem.find(\".card-text\").text();\n    var name = orderItem.find(\".foodname\").text();\n    restid = orderItem.find(\".restid\").text();\n\n    if (!carts[restid]) {\n      carts[restid] = {};\n    }\n\n    var item = {\n      q: quantity,\n      p: price,\n      n: name,\n    };\n    carts[restid][id] = item;\n    updateCart();\n    increaseCartItemCount();\n  });\n\n  function updateCart() {\n    localStorage.setItem(\"carts\", JSON.stringify(carts));\n    $(\"#cart-items\").empty();\n    var totalQuantity = 0;\n    var totalPrice = 0;\n\n    if (carts[restid]) {\n      Object.keys(carts[restid]).forEach((item) => {\n        var itemPrice = carts[restid][item].q * carts[restid][item].p;\n        totalQuantity += carts[restid][item].q;\n        totalPrice += itemPrice;\n\n        var cartItemHtml =\n          '<div class=\"cart-item\">' +\n          '<li class=\"list-group-item\">Food Name: <strong>' +\n          carts[restid][item].n +\n          \"</strong></li>\" +\n          '<li class=\"list-group-item\">Quantity: ' +\n          carts[restid][item].q +\n          \"</li>\" +\n          '<li class=\"list-group-item\"> <strong> Price: Rs.' +\n          itemPrice +\n          \"</strong></li>\" +\n          \"</div>\";\n\n        $(\"#cart-items\").append(cartItemHtml);\n      });\n    }\n\n    $(\"#total-quantity\").text(totalQuantity);\n    $(\"#total-price\").text(\"Rs\" + totalPrice.toFixed(2));\n\n    updateCartItemCount(); \n  }\n\n  $(\"#checkout\").click(function () {\n    localStorage.setItem(\"carts\", JSON.stringify(carts)); \n    sessionStorage.removeItem(\"cart\");\n\n    $.ajax({\n      url: \"/resturants/\" + restid + \"/orders\",\n      method: \"POST\",\n      data: {\n        cart_items: carts[restid],\n        authenticity_token: $('meta[name=\"csrf-token\"]').attr(\"content\"),\n      },\n      success: function (response) {\n        alert(\"Added to cart successfully!\");\n        updateCartItemCount();\n      },\n      error: function (xhr, status, error) {\n        alert(\"Error placing the order. Please try again.\");\n      },\n    });\n    delete carts[restid];\n  });\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}