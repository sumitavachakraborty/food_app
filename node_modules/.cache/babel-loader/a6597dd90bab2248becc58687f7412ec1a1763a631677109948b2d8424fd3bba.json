{"ast":null,"code":"// Cart items\nvar carts = {}; // Object to store separate carts for each restaurant\n\n$(document).ready(function () {\n  if (localStorage.getItem(\"carts\")) {\n    carts = JSON.parse(localStorage.getItem(\"carts\"));\n    updateCart(); // Update the cart display\n  }\n});\n\n// Load cart item count from local storage and update the cart button\nfunction updateCartItemCount() {\n  var cartItemCount = 0;\n  if (carts[restid]) {\n    cartItemCount = Object.keys(carts[restid]).length;\n  }\n  $(\"#cart-item-count\").text(cartItemCount);\n}\n\n// Cart button click event\n$(\"#cart-btn\").click(function () {\n  $(\"#submit-cart\").toggle();\n});\n\n// Increase cart item count\nfunction increaseCartItemCount() {\n  var itemCount = Object.keys(carts[restid]).length;\n  $(\"#cart-item-count\").text(itemCount);\n}\n\n// Cart item click event\n$(\".submit-order\").click(function () {\n  $(\"#submit-cart\").removeAttr(\"style\");\n  var orderItem = $(this).closest(\".order-item\");\n  var quantity = orderItem.find(\".order-quantity\").val();\n  var id = orderItem.find(\".submit-order\").val();\n  var price = orderItem.find(\".card-text\").text();\n  var name = orderItem.find(\".foodname\").text();\n\n  // Initialize the cart for the restaurant if not present\n  if (!carts[restid]) {\n    carts[restid] = {};\n  }\n  var item = {\n    q: quantity,\n    p: price,\n    n: name\n  };\n  carts[restid][id] = item;\n  updateCart();\n  increaseCartItemCount(); // Update cart item count\n});\n\nfunction updateCart() {\n  localStorage.setItem(\"carts\", JSON.stringify(carts));\n  $(\"#cart-items\").empty();\n  var totalQuantity = 0;\n  var totalPrice = 0;\n  if (carts[restid]) {\n    Object.keys(carts[restid]).forEach(item => {\n      var itemPrice = carts[restid][item].q * carts[restid][item].p;\n      totalQuantity += carts[restid][item].q;\n      totalPrice += itemPrice;\n      var cartItemHtml = '<div class=\"cart-item\">' + '<li class=\"list-group-item\">Food Name: <strong>' + carts[restid][item].n + \"</strong></li>\" + '<li class=\"list-group-item\">Quantity: ' + carts[restid][item].q + \"</li>\" + '<li class=\"list-group-item\"> <strong> Price: Rs.' + itemPrice + \"</strong></li>\" + \"</div>\";\n      $(\"#cart-items\").append(cartItemHtml);\n    });\n  }\n  $(\"#total-quantity\").text(totalQuantity);\n  $(\"#total-price\").text(\"Rs\" + totalPrice.toFixed(2));\n}\n\n// Cart Checkout button click event\n$(\"#checkout\").click(function () {\n  delete carts[restid]; // Remove the cart for the current restaurant\n  localStorage.setItem(\"carts\", JSON.stringify(carts)); // Update the carts object in local storage\n  sessionStorage.removeItem(\"cart\");\n  $.ajax({\n    url: \"/resturants/\" + restid + \"/orders\",\n    method: \"POST\",\n    data: {\n      cart_items: carts[restid],\n      authenticity_token: $('meta[name=\"csrf-token\"]').attr(\"content\")\n    },\n    success: function (response) {\n      alert(\"Added to cart successfully!\");\n      updateCartItemCount(); // Update cart item count after successful order\n    },\n\n    error: function (xhr, status, error) {\n      alert(\"Error placing the order. Please try again.\");\n    }\n  });\n});","map":{"version":3,"names":["carts","$","document","ready","localStorage","getItem","JSON","parse","updateCart","updateCartItemCount","cartItemCount","restid","Object","keys","length","text","click","toggle","increaseCartItemCount","itemCount","removeAttr","orderItem","closest","quantity","find","val","id","price","name","item","q","p","n","setItem","stringify","empty","totalQuantity","totalPrice","forEach","itemPrice","cartItemHtml","append","toFixed","sessionStorage","removeItem","ajax","url","method","data","cart_items","authenticity_token","attr","success","response","alert","error","xhr","status"],"sources":["/home/sumitava/rails_practise/zom/zoma/app/javascript/packs/add_to_cart.js"],"sourcesContent":["// Cart items\nvar carts = {}; // Object to store separate carts for each restaurant\n\n$(document).ready(function () {\n  if (localStorage.getItem(\"carts\")) {\n    carts = JSON.parse(localStorage.getItem(\"carts\"));\n    updateCart(); // Update the cart display\n  }\n});\n\n// Load cart item count from local storage and update the cart button\nfunction updateCartItemCount() {\n  var cartItemCount = 0;\n  if (carts[restid]) {\n    cartItemCount = Object.keys(carts[restid]).length;\n  }\n  $(\"#cart-item-count\").text(cartItemCount);\n}\n\n// Cart button click event\n$(\"#cart-btn\").click(function () {\n  $(\"#submit-cart\").toggle();\n});\n\n// Increase cart item count\nfunction increaseCartItemCount() {\n  var itemCount = Object.keys(carts[restid]).length;\n  $(\"#cart-item-count\").text(itemCount);\n}\n\n// Cart item click event\n$(\".submit-order\").click(function () {\n  $(\"#submit-cart\").removeAttr(\"style\");\n  var orderItem = $(this).closest(\".order-item\");\n  var quantity = orderItem.find(\".order-quantity\").val();\n  var id = orderItem.find(\".submit-order\").val();\n  var price = orderItem.find(\".card-text\").text();\n  var name = orderItem.find(\".foodname\").text();\n\n  // Initialize the cart for the restaurant if not present\n  if (!carts[restid]) {\n    carts[restid] = {};\n  }\n\n  var item = {\n    q: quantity,\n    p: price,\n    n: name,\n  };\n  carts[restid][id] = item;\n  updateCart();\n  increaseCartItemCount(); // Update cart item count\n});\n\nfunction updateCart() {\n  localStorage.setItem(\"carts\", JSON.stringify(carts));\n  $(\"#cart-items\").empty();\n  var totalQuantity = 0;\n  var totalPrice = 0;\n\n  if (carts[restid]) {\n    Object.keys(carts[restid]).forEach((item) => {\n      var itemPrice = carts[restid][item].q * carts[restid][item].p;\n      totalQuantity += carts[restid][item].q;\n      totalPrice += itemPrice;\n\n      var cartItemHtml =\n        '<div class=\"cart-item\">' +\n        '<li class=\"list-group-item\">Food Name: <strong>' +\n        carts[restid][item].n +\n        \"</strong></li>\" +\n        '<li class=\"list-group-item\">Quantity: ' +\n        carts[restid][item].q +\n        \"</li>\" +\n        '<li class=\"list-group-item\"> <strong> Price: Rs.' +\n        itemPrice +\n        \"</strong></li>\" +\n        \"</div>\";\n\n      $(\"#cart-items\").append(cartItemHtml);\n    });\n  }\n\n  $(\"#total-quantity\").text(totalQuantity);\n  $(\"#total-price\").text(\"Rs\" + totalPrice.toFixed(2));\n}\n\n// Cart Checkout button click event\n$(\"#checkout\").click(function () {\n  delete carts[restid]; // Remove the cart for the current restaurant\n  localStorage.setItem(\"carts\", JSON.stringify(carts)); // Update the carts object in local storage\n  sessionStorage.removeItem(\"cart\");\n\n  $.ajax({\n    url: \"/resturants/\" + restid + \"/orders\",\n    method: \"POST\",\n    data: {\n      cart_items: carts[restid],\n      authenticity_token: $('meta[name=\"csrf-token\"]').attr(\"content\"),\n    },\n    success: function (response) {\n      alert(\"Added to cart successfully!\");\n      updateCartItemCount(); // Update cart item count after successful order\n    },\n    error: function (xhr, status, error) {\n      alert(\"Error placing the order. Please try again.\");\n    },\n  });\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}