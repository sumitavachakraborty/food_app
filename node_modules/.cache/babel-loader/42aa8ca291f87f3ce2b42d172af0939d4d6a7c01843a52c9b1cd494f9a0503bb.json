{"ast":null,"code":"var carts = {};\nvar restid = 0;\n$(document).ready(function () {\n  initializeCarts();\n});\nfunction initializeCarts() {\n  if (localStorage.getItem(\"carts\")) {\n    carts = JSON.parse(localStorage.getItem(\"carts\"));\n    restid = getRestIdFromUrl();\n    updateCartItemCount();\n    updateCart();\n  }\n}\nfunction getRestIdFromUrl() {\n  var urlParts = window.location.pathname.split(\"/\");\n  var restIdIndex = urlParts.indexOf(\"resturants\") + 1;\n  return urlParts[restIdIndex];\n}\n$(document).on(\"click\", \".submit-order\", function () {\n  var orderItem = $(this).closest(\".order-item\");\n  var quantity = orderItem.find(\".order-quantity\").val();\n  var id = $(this).val();\n  var price = parseFloat(orderItem.find(\".card-text\").text());\n  var name = orderItem.find(\".foodname\").text();\n  if (!carts[restid]) {\n    carts[restid] = {};\n  }\n  var item = {\n    q: parseInt(quantity),\n    p: price,\n    n: name\n  };\n  carts[restid][id] = item;\n  updateCartItemCount();\n  updateCart();\n});\n$(document).on(\"click\", \".remove-item\", function () {\n  var itemKey = $(this).data(\"item-key\");\n  delete carts[restid][itemKey];\n  $(\"#\" + itemKey).remove();\n  updateCart();\n});\n$(document).on(\"input\", \".order-quantity\", function () {\n  var newQuantity = parseInt($(this).val());\n  var itemKey = $(this).data(\"item-key\");\n  if (carts[restid] && carts[restid][itemKey]) {\n    var item = carts[restid][itemKey];\n    item.q = newQuantity;\n    var itemPrice = item.q * item.p;\n    $(this).closest(\".cart-item\").find(\".item-price\").text(\"Price: Rs. \" + itemPrice.toFixed(2));\n    updateCartItemCount();\n    updateCart();\n  }\n});\nfunction updateCartItemCount() {\n  var cartItemCount = carts[restid] ? Object.keys(carts[restid]).length : 0;\n  $(\"#cart-item-count\").text(cartItemCount);\n}\nfunction updateCart() {\n  localStorage.setItem(\"carts\", JSON.stringify(carts));\n  $(\"#cart-items\").empty();\n  var totalQuantity = 0;\n  var totalPrice = 0;\n  if (carts[restid]) {\n    Object.keys(carts[restid]).forEach(itemKey => {\n      var item = carts[restid][itemKey];\n      var itemPrice = item.q * item.p;\n      totalQuantity += item.q;\n      totalPrice += itemPrice;\n      var cartItemHtml = `\n          <div class=\"cart-item shadow p-3 mb-5 bg-body rounded\" id=\"${itemKey}\">\n            <li class=\"list-group-item\">Food Name: <strong>${item.n}</strong></li>\n            <div class=\"quantity-input\">\n              Quantity: \n              <input type=\"number\" class=\"order-quantity\" value=\"${item.q}\" min=\"1\" max=\"20\" data-item-key=\"${itemKey}\" onkeydown=\"return false\">\n            </div>\n            <li class=\"list-group-item\">Price: Rs. ${itemPrice.toFixed(2)}</li>\n            <button class=\"remove-item btn btn-danger btn-sm\" data-item-key=\"${itemKey}\">Remove</button>\n          </div>`;\n      $(\"#cart-items\").append(cartItemHtml);\n    });\n  }\n  $(\"#total-quantity\").text(totalQuantity);\n  $(\"#total-price\").text(\"Total Price: Rs \" + totalPrice.toFixed(2));\n  updateCartItemCount();\n}\n$(\"#checkout\").click(function () {\n  localStorage.setItem(\"carts\", JSON.stringify(carts));\n  $.ajax({\n    url: \"/resturants/\" + restid + \"/orders\",\n    method: \"POST\",\n    data: {\n      cart_items: carts[restid],\n      authenticity_token: $('meta[name=\"csrf-token\"]').attr(\"content\")\n    },\n    success: function (response) {\n      delete carts[restid];\n      updateCartItemCount();\n      updateCart();\n      alert(\"Submitted order successfully!\");\n    },\n    error: function (xhr, status, error) {\n      alert(\"Please add items to the cart\");\n    }\n  });\n});","map":{"version":3,"names":["carts","restid","$","document","ready","initializeCarts","localStorage","getItem","JSON","parse","getRestIdFromUrl","updateCartItemCount","updateCart","urlParts","window","location","pathname","split","restIdIndex","indexOf","on","orderItem","closest","quantity","find","val","id","price","parseFloat","text","name","item","q","parseInt","p","n","itemKey","data","remove","newQuantity","itemPrice","toFixed","cartItemCount","Object","keys","length","setItem","stringify","empty","totalQuantity","totalPrice","forEach","cartItemHtml","append","click","ajax","url","method","cart_items","authenticity_token","attr","success","response","alert","error","xhr","status"],"sources":["/home/sumitava/rails_practise/zom/zoma/app/javascript/packs/add_to_cart.js"],"sourcesContent":["var carts = {};\n  var restid = 0;\n\n  $(document).ready(function () {\n    initializeCarts();\n  });\n\n  function initializeCarts() {\n    if (localStorage.getItem(\"carts\")) {\n      carts = JSON.parse(localStorage.getItem(\"carts\"));\n      restid = getRestIdFromUrl();\n      updateCartItemCount();\n      updateCart();\n    }\n  }\n\n  function getRestIdFromUrl() {\n    var urlParts = window.location.pathname.split(\"/\");\n    var restIdIndex = urlParts.indexOf(\"resturants\") + 1;\n    return urlParts[restIdIndex];\n  }\n\n  $(document).on(\"click\", \".submit-order\", function () {\n    var orderItem = $(this).closest(\".order-item\");\n    var quantity = orderItem.find(\".order-quantity\").val();\n    var id = $(this).val();\n    var price = parseFloat(orderItem.find(\".card-text\").text());\n    var name = orderItem.find(\".foodname\").text();\n\n    if (!carts[restid]) {\n      carts[restid] = {};\n    }\n\n    var item = {\n      q: parseInt(quantity),\n      p: price,\n      n: name,\n    };\n    carts[restid][id] = item;\n\n    updateCartItemCount();\n    updateCart();\n  });\n\n  $(document).on(\"click\", \".remove-item\", function () {\n    var itemKey = $(this).data(\"item-key\");\n    delete carts[restid][itemKey];\n    $(\"#\" + itemKey).remove();\n    updateCart();\n  });\n\n  $(document).on(\"input\", \".order-quantity\", function () {\n    var newQuantity = parseInt($(this).val());\n    var itemKey = $(this).data(\"item-key\");\n  \n    if (carts[restid] && carts[restid][itemKey]) {\n      var item = carts[restid][itemKey];\n      item.q = newQuantity;\n      \n      var itemPrice = item.q * item.p;\n      $(this).closest(\".cart-item\").find(\".item-price\").text(\"Price: Rs. \" + itemPrice.toFixed(2));\n      \n      updateCartItemCount();\n      updateCart();\n    }\n  });\n  \n\n  function updateCartItemCount() {\n    var cartItemCount = carts[restid] ? Object.keys(carts[restid]).length : 0;\n    $(\"#cart-item-count\").text(cartItemCount);\n  }\n  \n\n  function updateCart() {\n    localStorage.setItem(\"carts\", JSON.stringify(carts));\n    $(\"#cart-items\").empty();\n    var totalQuantity = 0;\n    var totalPrice = 0;\n\n    if (carts[restid]) {\n      Object.keys(carts[restid]).forEach((itemKey) => {\n        var item = carts[restid][itemKey];\n        var itemPrice = item.q * item.p;\n        totalQuantity += item.q;\n        totalPrice += itemPrice;\n\n        var cartItemHtml = `\n          <div class=\"cart-item shadow p-3 mb-5 bg-body rounded\" id=\"${itemKey}\">\n            <li class=\"list-group-item\">Food Name: <strong>${item.n}</strong></li>\n            <div class=\"quantity-input\">\n              Quantity: \n              <input type=\"number\" class=\"order-quantity\" value=\"${item.q}\" min=\"1\" max=\"20\" data-item-key=\"${itemKey}\" onkeydown=\"return false\">\n            </div>\n            <li class=\"list-group-item\">Price: Rs. ${itemPrice.toFixed(2)}</li>\n            <button class=\"remove-item btn btn-danger btn-sm\" data-item-key=\"${itemKey}\">Remove</button>\n          </div>`;\n\n        $(\"#cart-items\").append(cartItemHtml);\n      });\n    }\n\n    $(\"#total-quantity\").text(totalQuantity);\n    $(\"#total-price\").text(\"Total Price: Rs \" + totalPrice.toFixed(2));\n\n    updateCartItemCount();\n  }\n\n  $(\"#checkout\").click(function () {\n    localStorage.setItem(\"carts\", JSON.stringify(carts));\n\n    $.ajax({\n      url: \"/resturants/\" + restid + \"/orders\",\n      method: \"POST\",\n      data: {\n        cart_items: carts[restid],\n        authenticity_token: $('meta[name=\"csrf-token\"]').attr(\"content\"),\n      },\n      success: function (response) {\n        delete carts[restid];\n        updateCartItemCount();\n        updateCart();\n        alert(\"Submitted order successfully!\");\n      },\n      error: function (xhr, status, error) {\n        alert(\"Please add items to the cart\");\n      },\n    });\n  });"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}