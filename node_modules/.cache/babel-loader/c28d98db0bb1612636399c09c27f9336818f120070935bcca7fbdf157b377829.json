{"ast":null,"code":"$('#change_pic').click(function () {\n  console.log('clicked');\n  $('#take_pic').trigger('click');\n  $('#take_pic').on('change', function (e) {\n    if (e.target.files.length > 0) {\n      $('#submit_btn').trigger('click');\n    }\n  });\n});\n$('.make_admin').click(function () {\n  makeadmin($(this).val());\n});\nfunction makeadmin(idata) {\n  $.ajax({\n    url: '/makeadmin',\n    method: 'POST',\n    data: {\n      id: idata,\n      authenticity_token: $('meta[name=\"csrf-token\"]').attr('content')\n    },\n    success: function (data) {},\n    error: function (data) {}\n  });\n}\n$('.mark-read').click(function () {\n  markread($(this).val());\n});\nfunction markread(idata) {\n  console.log(idata);\n  $.ajax({\n    url: '/markread',\n    method: 'POST',\n    data: {\n      id: idata,\n      authenticity_token: $('meta[name=\"csrf-token\"]').attr('content')\n    },\n    success: function (data) {},\n    error: function (data) {}\n  });\n}\nvar cart = {};\nlet restid = 0;\n$('.submit-order').click(function () {\n  console.log('hhh');\n  $('#submit-cart').removeAttr(\"style\");\n  var orderitem = $(this).closest('.order-item');\n  var quantity = orderitem.find('.order-quantity').val();\n  var id = orderitem.find('.submit-order').val();\n  var price = orderitem.find('.card-text').text();\n  var name = orderitem.find('.foodname').text();\n  var resturantid = orderitem.find('.restid').text();\n  restid = resturantid;\n  // console.log(restid);\n\n  var item = {\n    q: quantity,\n    p: price,\n    n: name\n  };\n  cart[id] = item;\n  console.log(cart);\n  updateCart();\n  // req(resturantid);\n});\n\nfunction updateCart() {\n  // Save cart items in local storage\n  localStorage.setItem('cart', JSON.stringify(cart));\n\n  // Update cart display\n  $('#cart-items').empty();\n  var totalQuantity = 0;\n  var totalPrice = 0;\n  Object.keys(cart).forEach(item => {\n    var itemPrice = cart[item].q * cart[item].p;\n    totalQuantity += cart[item].q;\n    totalPrice += itemPrice;\n    var cartItemHtml = '<div class=\"cart-item\">' + '<li class=\"list-group-item\">Food Name: <strong>' + cart[item].n + '</strong></li>' + '<li class=\"list-group-item\">Quantity: ' + cart[item].q + '</li>' + '<li class=\"list-group-item\"> <strong> Price: Rs.' + itemPrice + '</strong></li>' + '</div>';\n    $('#cart-items').append(cartItemHtml);\n  });\n  $('#total-quantity').text(totalQuantity);\n  $('#total-price').text('$' + totalPrice.toFixed(2));\n}\n\n// function req(resid){\n//     console.log(resid);\n$('#checkout').click(function () {\n  localStorage.removeItem('cart');\n  console.log(restid);\n  $.ajax({\n    url: '/resturants/' + restid + '/orders',\n    method: 'POST',\n    data: {\n      cart_items: cart,\n      authenticity_token: $('meta[name=\"csrf-token\"]').attr('content')\n    },\n    success: function (response) {\n      // Handle the success response if needed\n    },\n    error: function (xhr, status, error) {\n      // Handle the error if needed\n    }\n  });\n});\n// }","map":{"version":3,"names":["$","click","console","log","trigger","on","e","target","files","length","makeadmin","val","idata","ajax","url","method","data","id","authenticity_token","attr","success","error","markread","cart","restid","removeAttr","orderitem","closest","quantity","find","price","text","name","resturantid","item","q","p","n","updateCart","localStorage","setItem","JSON","stringify","empty","totalQuantity","totalPrice","Object","keys","forEach","itemPrice","cartItemHtml","append","toFixed","removeItem","cart_items","response","xhr","status"],"sources":["/home/sumitava/rails_practise/zom/zoma/app/javascript/packs/main.js"],"sourcesContent":["$('#change_pic').click(function(){\n    console.log('clicked')\n    $('#take_pic').trigger('click')\n    $('#take_pic').on('change',function(e){\n      if(e.target.files.length>0){\n        $('#submit_btn').trigger('click');\n      }   \n    })\n})\n\n\n$('.make_admin').click(function(){\n  makeadmin($(this).val())\n})\n\nfunction makeadmin(idata){\n  $.ajax({\n\n    url: '/makeadmin',\n    method: 'POST',\n    data:{id: idata,authenticity_token: $('meta[name=\"csrf-token\"]').attr('content')},\n    success: function(data){\n\n    },\n    error: function(data){\n\n    },\n\n\n  })\n}\n\n$('.mark-read').click(function(){\n  markread($(this).val())\n})\n\nfunction markread(idata){\n  console.log(idata);\n  $.ajax({\n\n    url: '/markread',\n    method: 'POST',\n    data:{id: idata,authenticity_token: $('meta[name=\"csrf-token\"]').attr('content')},\n    success: function(data){\n\n    },\n    error: function(data){\n\n    },\n\n\n  })\n}\n\nvar cart = {}\nlet restid = 0\n    $('.submit-order').click(function() {\n        console.log('hhh');\n        $('#submit-cart').removeAttr(\"style\");\n\n        var orderitem = $(this).closest('.order-item');\n        \n        var quantity = orderitem.find('.order-quantity').val();\n        var id = orderitem.find('.submit-order').val();\n        var price = orderitem.find('.card-text').text();\n        var name = orderitem.find('.foodname').text();\n        var resturantid = orderitem.find('.restid').text();\n        \n        restid = resturantid\n        // console.log(restid);\n\n        var item ={\n            q: quantity,\n            p: price,\n            n: name\n        }\n\n        cart[id]=item\n\n        console.log(cart);\n        updateCart();\n        // req(resturantid);\n    })\n\n    function updateCart() {\n    // Save cart items in local storage\n        localStorage.setItem('cart', JSON.stringify(cart));\n\n    // Update cart display\n        $('#cart-items').empty();\n        var totalQuantity = 0;\n        var totalPrice = 0;\n\n        Object.keys(cart).forEach(item => {\n        var itemPrice = cart[item].q * cart[item].p;\n        totalQuantity += cart[item].q;\n        totalPrice += itemPrice;\n\n        var cartItemHtml = '<div class=\"cart-item\">' +\n            '<li class=\"list-group-item\">Food Name: <strong>' + cart[item].n + '</strong></li>' +\n            '<li class=\"list-group-item\">Quantity: ' + cart[item].q + '</li>' +\n            '<li class=\"list-group-item\"> <strong> Price: Rs.' + itemPrice+ '</strong></li>' +\n            '</div>';\n\n        $('#cart-items').append(cartItemHtml);\n        \n        });\n\n        $('#total-quantity').text(totalQuantity);\n        $('#total-price').text('$' + totalPrice.toFixed(2));\n    } \n    \n    // function req(resid){\n    //     console.log(resid);\n        $('#checkout').click(function() {\n            localStorage.removeItem('cart');\n            console.log(restid);\n            $.ajax({\n            url: '/resturants/'+restid+'/orders',\n            method: 'POST',\n            data: { cart_items: cart,authenticity_token: $('meta[name=\"csrf-token\"]').attr('content')},\n            success: function(response) {\n                // Handle the success response if needed\n            },\n            error: function(xhr, status, error) {\n                // Handle the error if needed\n            }\n            });\n        });\n    // }\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}