{"ast":null,"code":"//adding cart items\nvar cart = {};\nlet restid = 0;\n$(document).ready(function () {\n  // Load cart from localStorage on page load\n  if (localStorage.getItem(\"cart\")) {\n    cart = JSON.parse(localStorage.getItem(\"cart\"));\n    updateCart(); // Update the cart display\n  }\n});\n\n$(\".submit-order\").click(function () {\n  $(\"#submit-cart\").removeAttr(\"style\");\n  var orderItem = $(this).closest(\".order-item\");\n  var quantity = orderItem.find(\".order-quantity\").val();\n  var id = orderItem.find(\".submit-order\").val();\n  var price = orderItem.find(\".card-text\").text();\n  var name = orderItem.find(\".foodname\").text();\n  var resturantid = orderItem.find(\".restid\").text();\n  restid = resturantid;\n  var item = {\n    q: quantity,\n    p: price,\n    n: name\n  };\n  cart[id] = item;\n\n  // Update cart in both localStorage and sessionStorage\n  updateCart();\n});\nfunction updateCart() {\n  localStorage.setItem(\"cart\", JSON.stringify(cart));\n  sessionStorage.setItem(\"cart\", JSON.stringify(cart));\n  $(\"#cart-items\").empty();\n  var totalQuantity = 0;\n  var totalPrice = 0;\n  Object.keys(cart).forEach(item => {\n    var itemPrice = cart[item].q * cart[item].p;\n    totalQuantity += cart[item].q;\n    totalPrice += itemPrice;\n    var cartItemHtml = '<div class=\"cart-item\">' + '<li class=\"list-group-item\">Food Name: <strong>' + cart[item].n + \"</strong></li>\" + '<li class=\"list-group-item\">Quantity: ' + cart[item].q + \"</li>\" + '<li class=\"list-group-item\"> <strong> Price: Rs.' + itemPrice + \"</strong></li>\" + \"</div>\";\n    $(\"#cart-items\").append(cartItemHtml);\n  });\n  $(\"#total-quantity\").text(totalQuantity);\n  $(\"#total-price\").text(\"Rs\" + totalPrice.toFixed(2));\n}\n$(\"#checkout\").click(function () {\n  localStorage.removeItem(\"cart\");\n  // Remove cart from sessionStorage\n  sessionStorage.removeItem(\"cart\");\n  $.ajax({\n    url: \"/resturants/\" + restid + \"/orders\",\n    method: \"POST\",\n    data: {\n      cart_items: cart,\n      authenticity_token: $('meta[name=\"csrf-token\"]').attr(\"content\")\n    },\n    success: function (response) {\n      alert(\"Added to cart successfully!\");\n    },\n    error: function (xhr, status, error) {\n      alert(\"Error placing the order. Please try again.\");\n    }\n  });\n});","map":{"version":3,"names":["cart","restid","$","document","ready","localStorage","getItem","JSON","parse","updateCart","click","removeAttr","orderItem","closest","quantity","find","val","id","price","text","name","resturantid","item","q","p","n","setItem","stringify","sessionStorage","empty","totalQuantity","totalPrice","Object","keys","forEach","itemPrice","cartItemHtml","append","toFixed","removeItem","ajax","url","method","data","cart_items","authenticity_token","attr","success","response","alert","error","xhr","status"],"sources":["/home/sumitava/rails_practise/zom/zoma/app/javascript/packs/add_to_cart.js"],"sourcesContent":["//adding cart items\nvar cart = {};\nlet restid = 0;\n\n$(document).ready(function () {\n  // Load cart from localStorage on page load\n  if (localStorage.getItem(\"cart\")) {\n    cart = JSON.parse(localStorage.getItem(\"cart\"));\n    updateCart(); // Update the cart display\n  }\n});\n\n$(\".submit-order\").click(function () {\n  $(\"#submit-cart\").removeAttr(\"style\");\n  var orderItem = $(this).closest(\".order-item\");\n  var quantity = orderItem.find(\".order-quantity\").val();\n  var id = orderItem.find(\".submit-order\").val();\n  var price = orderItem.find(\".card-text\").text();\n  var name = orderItem.find(\".foodname\").text();\n  var resturantid = orderItem.find(\".restid\").text();\n  restid = resturantid;\n  var item = {\n    q: quantity,\n    p: price,\n    n: name,\n  };\n  cart[id] = item;\n\n  // Update cart in both localStorage and sessionStorage\n  updateCart();\n});\n\nfunction updateCart() {\n  localStorage.setItem(\"cart\", JSON.stringify(cart));\n  sessionStorage.setItem(\"cart\", JSON.stringify(cart));\n\n  $(\"#cart-items\").empty();\n  var totalQuantity = 0;\n  var totalPrice = 0;\n\n  Object.keys(cart).forEach((item) => {\n    var itemPrice = cart[item].q * cart[item].p;\n    totalQuantity += cart[item].q;\n    totalPrice += itemPrice;\n\n    var cartItemHtml =\n      '<div class=\"cart-item\">' +\n      '<li class=\"list-group-item\">Food Name: <strong>' +\n      cart[item].n +\n      \"</strong></li>\" +\n      '<li class=\"list-group-item\">Quantity: ' +\n      cart[item].q +\n      \"</li>\" +\n      '<li class=\"list-group-item\"> <strong> Price: Rs.' +\n      itemPrice +\n      \"</strong></li>\" +\n      \"</div>\";\n\n    $(\"#cart-items\").append(cartItemHtml);\n  });\n\n  $(\"#total-quantity\").text(totalQuantity);\n  $(\"#total-price\").text(\"Rs\" + totalPrice.toFixed(2));\n}\n\n$(\"#checkout\").click(function () {\n  localStorage.removeItem(\"cart\");\n  // Remove cart from sessionStorage\n  sessionStorage.removeItem(\"cart\");\n\n  $.ajax({\n    url: \"/resturants/\" + restid + \"/orders\",\n    method: \"POST\",\n    data: {\n      cart_items: cart,\n      authenticity_token: $('meta[name=\"csrf-token\"]').attr(\"content\"),\n    },\n    success: function (response) {\n      alert(\"Added to cart successfully!\");\n    },\n    error: function (xhr, status, error) {\n      alert(\"Error placing the order. Please try again.\");\n    },\n  });\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}