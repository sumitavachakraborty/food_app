{"ast":null,"code":"// change picture for user\n$(\"#change_pic\").click(function () {\n  console.log(\"clicked\");\n  $(\"#take_pic\").trigger(\"click\");\n  $(\"#take_pic\").on(\"change\", function (e) {\n    if (e.target.files.length > 0) {\n      $(\"#submit_btn\").trigger(\"click\");\n    }\n  });\n});\n\n//make admin\n$(\".make_admin\").click(function () {\n  makeadmin($(this).val());\n});\nfunction makeadmin(idata) {\n  $.ajax({\n    url: \"/makeadmin\",\n    method: \"POST\",\n    data: {\n      id: idata,\n      authenticity_token: $('meta[name=\"csrf-token\"]').attr(\"content\")\n    },\n    success: function (data) {},\n    error: function (data) {}\n  });\n}\n\n//mark read notifications\n$(\".mark-read\").click(function () {\n  markread($(this).val());\n});\nfunction markread(idata) {\n  console.log(idata);\n  $.ajax({\n    url: \"/markread\",\n    method: \"POST\",\n    data: {\n      id: idata,\n      authenticity_token: $('meta[name=\"csrf-token\"]').attr(\"content\")\n    },\n    success: function (data) {\n      alert(\"Marked as read successfully!\");\n    },\n    error: function (data) {}\n  });\n}\n\n//adding cart items\nvar cart = {};\nlet restid = 0;\n$(\".submit-order\").click(function () {\n  $(\"#submit-cart\").removeAttr(\"style\");\n  var orderItem = $(this).closest(\".order-item\");\n  var quantity = orderItem.find(\".order-quantity\").val();\n  var id = orderItem.find(\".submit-order\").val();\n  var price = orderItem.find(\".card-text\").text();\n  var name = orderItem.find(\".foodname\").text();\n  var resturantid = orderItem.find(\".restid\").text();\n  restid = resturantid;\n  var item = {\n    q: quantity,\n    p: price,\n    n: name\n  };\n  cart[id] = item;\n  updateCart();\n});\nfunction updateCart() {\n  localStorage.setItem(\"cart\", JSON.stringify(cart));\n  $(\"#cart-items\").empty();\n  var totalQuantity = 0;\n  var totalPrice = 0;\n  Object.keys(cart).forEach(item => {\n    var itemPrice = cart[item].q * cart[item].p;\n    totalQuantity += cart[item].q;\n    totalPrice += itemPrice;\n    var cartItemHtml = '<div class=\"cart-item\">' + '<li class=\"list-group-item\">Food Name: <strong>' + cart[item].n + \"</strong></li>\" + '<li class=\"list-group-item\">Quantity: ' + cart[item].q + \"</li>\" + '<li class=\"list-group-item\"> <strong> Price: Rs.' + itemPrice + \"</strong></li>\" + \"</div>\";\n    $(\"#cart-items\").append(cartItemHtml);\n  });\n  $(\"#total-quantity\").text(totalQuantity);\n  $(\"#total-price\").text(\"Rs\" + totalPrice.toFixed(2));\n}\n$(\"#checkout\").click(function () {\n  localStorage.removeItem(\"cart\");\n  $.ajax({\n    url: \"/resturants/\" + restid + \"/orders\",\n    method: \"POST\",\n    data: {\n      cart_items: cart,\n      authenticity_token: $('meta[name=\"csrf-token\"]').attr(\"content\")\n    },\n    success: function (response) {\n      alert(\"Added to cart successfully!\");\n    },\n    error: function (xhr, status, error) {\n      alert(\"Error placing the order. Please try again.\");\n    }\n  });\n});\n\n// order edit\n$(document).ready(function () {\n  var initialquantity = $('.quantity input[type=\"number\"]');\n  var initialinput = $('input[name=\"order[total]\"]');\n  var initalprice = $('.quantity .newprice');\n  initialquantity.on('change', function () {\n    updateTotal();\n  });\n  function updateTotal() {\n    var total = 0;\n    initialquantity.each(function (index) {\n      var quantity = parseInt($(this).val());\n      var price = parseFloat(initalprice.eq(index).data('price'));\n      total += quantity * price;\n    });\n    initialinput.val(total.toFixed(2));\n  }\n});\n\n// rating \n$('.rating-form span').click(function () {\n  var value = $(this).attr(\"data-value\");\n  $(\".rating\").val(value);\n  $(this).siblings(\"span\").removeClass(\"bi-star-fill\").addClass(\"bi-star\");\n  $(this).removeClass(\"bi-star\").addClass(\"bi-star-fill\");\n  $(this).prevAll(\"span\").removeClass(\"bi-star\").addClass(\"bi-star-fill\");\n});\n\n//approve review\n$('.approve').click(function () {\n  approvereview($(this).val());\n});\nfunction approvereview(review_id) {\n  console.log(review_id);\n  var id = $('#restvalue').attr(\"value\");\n  console.log(id);\n  $.ajax({\n    url: '/resturants/' + id + '/approve',\n    method: 'POST',\n    data: {\n      id: review_id,\n      authenticity_token: $('meta[name=\"csrf-token\"]').attr('content')\n    },\n    success: function (data) {},\n    error: function (data) {}\n  });\n}","map":{"version":3,"names":["$","click","console","log","trigger","on","e","target","files","length","makeadmin","val","idata","ajax","url","method","data","id","authenticity_token","attr","success","error","markread","alert","cart","restid","removeAttr","orderItem","closest","quantity","find","price","text","name","resturantid","item","q","p","n","updateCart","localStorage","setItem","JSON","stringify","empty","totalQuantity","totalPrice","Object","keys","forEach","itemPrice","cartItemHtml","append","toFixed","removeItem","cart_items","response","xhr","status","document","ready","initialquantity","initialinput","initalprice","updateTotal","total","each","index","parseInt","parseFloat","eq","value","siblings","removeClass","addClass","prevAll","approvereview","review_id"],"sources":["/home/sumitava/rails_practise/zom/zoma/app/javascript/packs/main.js"],"sourcesContent":["// change picture for user\n$(\"#change_pic\").click(function () {\n  console.log(\"clicked\");\n  $(\"#take_pic\").trigger(\"click\");\n  $(\"#take_pic\").on(\"change\", function (e) {\n    if (e.target.files.length > 0) {\n      $(\"#submit_btn\").trigger(\"click\");\n    }\n  });\n});\n\n//make admin\n$(\".make_admin\").click(function () {\n  makeadmin($(this).val());\n});\n\nfunction makeadmin(idata) {\n  $.ajax({\n    url: \"/makeadmin\",\n    method: \"POST\",\n    data: {\n      id: idata,\n      authenticity_token: $('meta[name=\"csrf-token\"]').attr(\"content\"),\n    },\n    success: function (data) {},\n    error: function (data) {},\n  });\n}\n\n\n\n//mark read notifications\n$(\".mark-read\").click(function () {\n  markread($(this).val());\n});\n\nfunction markread(idata) {\n  console.log(idata);\n  $.ajax({\n    url: \"/markread\",\n    method: \"POST\",\n    data: {\n      id: idata,\n      authenticity_token: $('meta[name=\"csrf-token\"]').attr(\"content\"),\n    },\n    success: function (data) {\n      alert(\"Marked as read successfully!\");\n    },\n    error: function (data) {},\n  });\n}\n\n//adding cart items\nvar cart = {};\nlet restid = 0;\n$(\".submit-order\").click(function () {\n  $(\"#submit-cart\").removeAttr(\"style\");\n  var orderItem = $(this).closest(\".order-item\");\n  var quantity = orderItem.find(\".order-quantity\").val();\n  var id = orderItem.find(\".submit-order\").val();\n  var price = orderItem.find(\".card-text\").text();\n  var name = orderItem.find(\".foodname\").text();\n  var resturantid = orderItem.find(\".restid\").text();\n  restid = resturantid;\n  var item = {\n    q: quantity,\n    p: price,\n    n: name,\n  };\n  cart[id] = item;\n  updateCart();\n});\n\nfunction updateCart() {\n  localStorage.setItem(\"cart\", JSON.stringify(cart));\n  $(\"#cart-items\").empty();\n  var totalQuantity = 0;\n  var totalPrice = 0;\n\n  Object.keys(cart).forEach((item) => {\n    var itemPrice = cart[item].q * cart[item].p;\n    totalQuantity += cart[item].q;\n    totalPrice += itemPrice;\n\n    var cartItemHtml =\n      '<div class=\"cart-item\">' +\n      '<li class=\"list-group-item\">Food Name: <strong>' +\n      cart[item].n +\n      \"</strong></li>\" +\n      '<li class=\"list-group-item\">Quantity: ' +\n      cart[item].q +\n      \"</li>\" +\n      '<li class=\"list-group-item\"> <strong> Price: Rs.' +\n      itemPrice +\n      \"</strong></li>\" +\n      \"</div>\";\n\n    $(\"#cart-items\").append(cartItemHtml);\n  });\n\n  $(\"#total-quantity\").text(totalQuantity);\n  $(\"#total-price\").text(\"Rs\" + totalPrice.toFixed(2));\n}\n\n$(\"#checkout\").click(function () {\n  localStorage.removeItem(\"cart\");\n  \n  $.ajax({\n    url: \"/resturants/\" + restid + \"/orders\",\n    method: \"POST\",\n    data: {\n      cart_items: cart,\n      authenticity_token: $('meta[name=\"csrf-token\"]').attr(\"content\"),\n    },\n    success: function (response) {\n      alert(\"Added to cart successfully!\");\n    },\n    error: function (xhr, status, error) {\n      alert(\"Error placing the order. Please try again.\");\n    },\n  });\n});\n\n// order edit\n$(document).ready(function() {\n  var initialquantity = $('.quantity input[type=\"number\"]');\n  var initialinput = $('input[name=\"order[total]\"]');\n  var initalprice = $('.quantity .newprice');\n\n  initialquantity.on('change', function() {\n    updateTotal();\n  });\n\n  function updateTotal() {\n    var total = 0;\n    initialquantity.each(function(index) {\n      var quantity = parseInt($(this).val());\n      var price = parseFloat(initalprice.eq(index).data('price'));\n      total += quantity * price;\n    });\n    initialinput.val(total.toFixed(2));\n  }\n});\n\n// rating \n$('.rating-form span').click(function(){\n  var value = $(this).attr(\"data-value\");\n  $(\".rating\").val(value);\n  $(this).siblings(\"span\").removeClass(\"bi-star-fill\").addClass(\"bi-star\");\n  $(this).removeClass(\"bi-star\").addClass(\"bi-star-fill\");\n  $(this).prevAll(\"span\").removeClass(\"bi-star\").addClass(\"bi-star-fill\");\n});\n\n//approve review\n$('.approve').click(function(){\n  approvereview($(this).val())\n})\n\nfunction approvereview(review_id){\n  console.log(review_id);\n  var id = $('#restvalue').attr(\"value\");\n  console.log(id);\n  $.ajax({\n\n    url: '/resturants/'+id+'/approve',\n    method: 'POST',\n    data:{id: review_id,authenticity_token: $('meta[name=\"csrf-token\"]').attr('content')},\n    success: function(data){\n\n    },\n    error: function(data){\n\n    },\n\n\n  })\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}